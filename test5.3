using System;
using System.Collections.Generic;
using System.Threading;

namespace School
{
    internal class Program
    {
        static void Main(string[] args)
        {
            const string CommandTakeCard = "1";
            const string CommandShowMyCards = "2";
            const string CommandRestar = "3";
            const string CommandShowAllCards = "4";
            const string CommandExit = "5";

            bool isWork = true;
            string userInput;

            Program program = new Program();
            MainText mainText = new MainText();
            Player player = new Player();
            DeckCard deck = new DeckCard();

            deck.PreparingCards();

            while (isWork)
            {
                Console.Clear();

                mainText.WriteCommandText();

                userInput = Console.ReadLine();

                switch (userInput)
                {
                    case CommandTakeCard:
                        program.GiveCard(player, deck);
                        break;

                    case CommandShowMyCards:
                        player.ShowPlayerCards();
                        break;

                    case CommandRestar:
                        deck.RestarDeckCard();
                        player.DeletePlayerCards();
                        break;

                    case CommandShowAllCards:
                        deck.ShowAllCards();
                        break;

                    case CommandExit:
                        isWork = false;
                        break;
                }
            }
        }

        public void GiveCard(Player player, DeckCard deck)
        {
            Card card = deck.GetCard();

            if (card != null)
            {
                player.TakeCard(card);
            }
            else
            {
                Console.WriteLine("No cards");
                Thread.Sleep(1000);
            }
        }
    }

    class Card
    {
        public Card(string number, string suit)
        {
            Number = number;
            Suit = suit;
        }

        public string Number { get; private set; }
        public string Suit { get; private set; }
    }

    class DeckCard
    {
        private List<Card> _cards = new List<Card>();

        public void ShowAllCards()
        {

            for (int i = 0; i < _cards.Count; i++)
            {
                Console.WriteLine($"{_cards[i].Number} / {_cards[i].Suit}\n");
            }

            Console.ReadLine();
        }

        public void RestarDeckCard()
        {
            _cards.Clear();
            AddCards();
        }

        public void PreparingCards()
        {
            AddCards();
        }

        public Card GetCard()
        {

            if (_cards.Count > 0)
            {
                Card card = _cards[0];
                _cards.Remove(card);
                return card;
            }

            return null;
        }

        private void AddCards()
        {
            string[] _suits = new string[] { "♠", "♣", "♦", "♥" };
            string[] _cardsPictures = new string[] { "6", "7", "8", "9", "10", "V", "Q", "K", "A" };

            Random random = new Random();

            for (int i = 0; i < _suits.Length; i++)
            {

                for (int j = 0; j < _cardsPictures.Length; j++)
                {
                    _cards.Add(new Card(_cardsPictures[j], _suits[i]));
                }
            }

            for (int i = _cards.Count - 1; i > 0; i--)
            {

                int n = random.Next(_cards.Count);
                int j = random.Next(_cards.Count);
                var tempCard = _cards[n];
                _cards[n] = _cards[j];
                _cards[j] = tempCard;
            }
        }
    }

    class Player
    {
        private List<Card> PlayerCards = new List<Card>();

        public void ShowPlayerCards()
        {

            for (int i = 0; i < PlayerCards.Count; i++)
            {
                Console.WriteLine($"{PlayerCards[i].Number} / {PlayerCards[i].Suit}\n");
            }

            Console.ReadLine();
        }

        public void DeletePlayerCards()
        {
            PlayerCards.Clear();
        }

        public void TakeCard(Card card)
        {
            PlayerCards.Add(card);
        }
    }

    class MainText
    {
        public void WriteText(string text, ConsoleColor color = ConsoleColor.White)
        {
            ConsoleColor defualt = Console.ForegroundColor;
            Console.ForegroundColor = color;
            Console.WriteLine(text);
            Console.ForegroundColor = defualt;
        }

        public void WriteCommandText()
        {
            const string CommandTakeCard = "1";
            const string CommandShowMyCards = "2";
            const string CommandRestar = "3";
            const string CommandShowAllCards = "4";
            const string CommandExit = "5";

            WriteText($"{CommandTakeCard} - To take card", ConsoleColor.Cyan);
            WriteText($"{CommandShowMyCards} - To view your cards", ConsoleColor.Cyan);
            WriteText($"{CommandRestar} - To reshuffle the cards", ConsoleColor.Cyan);
            WriteText($"{CommandShowAllCards} - To see all cards", ConsoleColor.Cyan);
            WriteText($"{CommandExit} - To exit", ConsoleColor.Cyan);
        }
    }
}
