using System;
using System.Collections.Generic;

namespace School
{
    internal class Program
    {
        static void Main(string[] args)
        {
            const string CommandTakeCard = "1";
            const string CommandShowMyCards = "2";
            const string CommandRestar = "3";
            const string CommandShowAllCards = "4";
            const string CommandExit = "5";

            bool isWork = true;
            string userInput;

            MainText mainText = new MainText();
            Player player = new Player();
            DeckCard deck = new DeckCard();

            deck.StartProgram();

            while (isWork)
            {
                Console.Clear();

                mainText.WriteCommandText();

                userInput = Console.ReadLine();

                switch (userInput)
                {
                    case CommandTakeCard:
                        deck.GiveCard(player);
                        break;

                    case CommandShowMyCards:
                        player.ShowPlayerCards();
                        Console.ReadLine();
                        break;

                    case CommandRestar:
                        deck.RestarDeckCard();
                        player.DeletePlayerCards();
                        break;

                    case CommandShowAllCards:
                        deck.ShowAllCards();
                        Console.ReadLine();
                        break;

                    case CommandExit:
                        isWork = false;
                        break;
                }
            }
        }
    }

    class Card
    {
        public Card(string cardNumber, string suit)
        {
            CardNumber = cardNumber;
            Suit = suit;
        }

        public string CardNumber { get; private set; }
        public string Suit { get; private set; }
    }

    class DeckCard
    {
        private List<Card> _cards = new List<Card>();

        private Random _random = new Random();

        private void AddCards()
        {
            int unaccountedNumber = 1;
            int numberSuits = Enum.GetValues(typeof(Suits)).Length; ;
            int maxNumberDeck = 10;
            int minNumberDeck = 6;
            int maxCardInDeck = 14;

            for (int i = 0; i < numberSuits; i++)
            {

                for (int j = minNumberDeck; j < (maxCardInDeck + unaccountedNumber); j++)
                {

                    if (j < maxNumberDeck)
                    {
                        string cardNumber = Convert.ToString(j);
                        string suite = Convert.ToString((Suits)i);
                        _cards.Add(new Card(cardNumber, suite));
                    }
                    else
                    {
                        string cardNumber = Convert.ToString((FaceCards)j);
                        string suite = Convert.ToString((Suits)i);
                        _cards.Add(new Card(cardNumber, suite));
                    }
                }
            }
        }

        public void ShowAllCards()
        {

            for (int i = 0; i < _cards.Count; i++)
            {
                Console.WriteLine($"{_cards[i].CardNumber} / {_cards[i].Suit}\n");
            }

            Console.WriteLine();
        }

        private Card DrawCard()
        {

            if (_cards.Count > 0)
            {
                int RandomCard = _random.Next(_cards.Count);

                Card card = _cards[RandomCard];
                _cards.RemoveAt(RandomCard);
                return card;
            }

            return null;
        }

        public void RestarDeckCard()
        {
            _cards.Clear();
            AddCards();
        }

        public void StartProgram()
        {
            AddCards();
        }

        public void GiveCard(Player player)
        {
            Card card = DrawCard();

            if (card != null)
            {
                player.TakeCard(card);
            }
        }
    }

    class Player
    {
        private List<Card> PlayerCards = new List<Card>();

        public void ShowPlayerCards()
        {

            for (int i = 0; i < PlayerCards.Count; i++)
            {
                Console.WriteLine($"{PlayerCards[i].CardNumber} / {PlayerCards[i].Suit}\n");
            }
        }

        public void DeletePlayerCards()
        {
            PlayerCards.Clear();
        }

        public void TakeCard(Card card)
        {
            PlayerCards.Add(card);
        }
    }

    class MainText
    {
        public void WriteText(string text, ConsoleColor color = ConsoleColor.White)
        {
            ConsoleColor defualt = Console.ForegroundColor;
            Console.ForegroundColor = color;
            Console.WriteLine(text);
            Console.ForegroundColor = defualt;
        }

        public void WriteCommandText()
        {
            const string CommandTakeCard = "1";
            const string CommandShowMyCards = "2";
            const string CommandRestar = "3";
            const string CommandShowAllCards = "4";
            const string CommandExit = "5";

            WriteText($"{CommandTakeCard} - To take card", ConsoleColor.Cyan);
            WriteText($"{CommandShowMyCards} - To view your cards", ConsoleColor.Cyan);
            WriteText($"{CommandRestar} - To reshuffle the cards", ConsoleColor.Cyan);
            WriteText($"{CommandShowAllCards} - To see all cards", ConsoleColor.Cyan);
            WriteText($"{CommandExit} - To exit", ConsoleColor.Cyan);
        }
    }

    enum Suits
    {
        Heart = 0,
        Dimond,
        Club,
        Spades,
    }
    enum FaceCards
    {
        V = 11,
        Q,
        K,
        A,
    }
}
